import{g as c,h as r,A as i}from"./index-e96ed495.js";const p=c("productStore",{state:()=>({productList:[],Loading:!1,productById:[]}),getters:{isLoading:({Loading:t})=>t,products:({productList:t})=>t,product:({productById:t})=>t},actions:{async getProductList(){try{this.Loading=!0;const t=`api/${r}/products/all`,a=await i.get(t);this.productList=a.data.products,this.Loading=!1}catch(t){this.Loading=!1,console.dir(t),alert("error!")}},async getProductById(t){try{this.Loading=!0;const a=`/api/${r}/product/${t}`,o=await i.get(a);console.log(o),this.productById=o.data.product}catch(a){console.dir(a),alert("error!")}finally{this.Loading=!1}},async updateProduct(t,a){var o;try{this.Loading=!0;let e=`api/${r}/admin/product`,s="post";t==="edit"&&(e+="/"+a.id,s="put",delete a.id);const d=await i[s](e,{data:a});return await this.getProductList(),this.Loading=!1,d}catch(e){if(console.dir(e),this.Loading=!1,(o=e==null?void 0:e.response)!=null&&o.data){let s="";for(const d of e.response.data.message)s+=d+`
`;alert(s)}}},async delProduct(t){try{this.Loading=!0;const a=`/api/${r}/admin/product/${t}`,o=await i.delete(a);return delete this.productList[t],this.Loading=!1,o}catch(a){this.Loading=!1,console.dir(a),alert("error!")}}}});export{p};
