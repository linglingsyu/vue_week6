import{_ as x,k as F,l as S,E as w,m as y,d as C,r,o as m,c as u,b as e,a,F as b,e as E,t as n,w as L,n as d,i as q,v as k}from"./index-e96ed495.js";import{C as f}from"./CartStore-9ca9a7f2.js";const M={data(){return{message:"",simpleSchema:{email:"required|email",name:"required",address:"required",tel:"required|min:8"}}},mounted(){this.getCartList()},components:{vForm:F,Field:S,ErrorMessage:w},methods:{...y(f,["getCartList","addOrder"]),async onSubmit(s,{resetForm:l}){if(this.carts.length===0)return!1;const _={user:s,message:this.message};await this.addOrder(_),l(),this.message=""},validateTel(s){return s?/[0-9]/i.test(s)?s.length<8?"電話長度至少需要8碼":!0:"必須為0-9":"電話為必填"}},computed:{...C(f,["isLoading","carts"]),total(){return this.carts.reduce((s,l)=>(s+=l.final_total,s),0)}},watch:{}},V=e("h1",null,"this is cart page",-1),B={class:"vl-parent"},D={class:"table-responsive"},N={class:"table"},O=e("thead",null,[e("tr",null,[e("th",null,"品名"),e("th",null,"數量"),e("th",null,"單價"),e("th",null,"小計")])],-1),T=e("td",{colspan:"3"},"總計",-1),j={class:"my-5 row justify-content-center"},z={class:"mb-3"},A=e("label",{for:"email",class:"form-label"},"Email",-1),U={class:"mb-3"},G=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),H={class:"mb-3"},I=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),J={class:"mb-3"},K=e("label",{for:"address",class:"form-label"},"收件人地址",-1),P={class:"mb-3"},Q=e("label",{for:"message",class:"form-label"},"留言",-1),R=["disabled"];function W(s,l,_,X,c,h){const g=r("isLoading"),o=r("Field"),i=r("ErrorMessage"),p=r("vForm");return m(),u(b,null,[V,e("div",B,[a(g,{active:s.isLoading},null,8,["active"]),e("div",D,[e("table",N,[O,e("tbody",null,[(m(!0),u(b,null,E(s.carts,t=>(m(),u("tr",{key:t.id},[e("th",null,n(t.product.title),1),e("td",null,n(t.qty),1),e("td",null,n(t.product.price),1),e("td",null,n(t.final_total),1)]))),128)),e("tr",null,[T,e("td",null,n(h.total),1)])])])]),e("div",j,[a(p,{"validation-schema":c.simpleSchema,onSubmit:h.onSubmit},{default:L(({errors:t})=>[e("div",z,[A,a(o,{id:"email",name:"email",label:"Email",class:d(["form-control",{"is-invalid":t.email}])},null,8,["class"]),a(i,{class:"text-danger",name:"email"})]),e("div",U,[G,a(o,{id:"name",name:"name",label:"姓名",class:d(["form-control",{"is-invalid":t.name}])},null,8,["class"]),a(i,{class:"text-danger",name:"name"})]),e("div",H,[I,a(o,{id:"tel",name:"tel",label:"電話",class:d(["form-control",{"is-invalid":t.tel}])},null,8,["class"]),a(i,{class:"text-danger",name:"tel"})]),e("div",J,[K,a(o,{id:"address",name:"address",label:"地址",class:d(["form-control",{"is-invalid":t.address}])},null,8,["class"]),a(i,{class:"text-danger",name:"address"})]),e("div",P,[Q,q(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[0]||(l[0]=v=>c.message=v)},null,512),[[k,c.message]])]),e("button",{disabled:!s.carts.length,type:"submit",class:"btn btn-danger"}," 送出訂單 ",8,R)]),_:1},8,["validation-schema","onSubmit"])])])],64)}const $=x(M,[["render",W]]);export{$ as default};
